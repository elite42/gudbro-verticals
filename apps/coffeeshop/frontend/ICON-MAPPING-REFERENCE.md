# Safety Filter Icon Mapping Reference

**Last Updated:** 2025-11-23
**Status:** ‚úÖ COMPLETE - 46/46 Filters with Professional SVG Icons

---

## Quick Summary

| Source | Count | Description |
|--------|-------|-------------|
| **Erudus Icons** | 39 | MIT-licensed professional icons from Erudus project |
| **NanoBanana AI** | 6 | AI-generated icons (shellfish, squid, shrimp, crab, soy, sulphites) |
| **Manual Creation** | 1 | Handcrafted low-carb icon (avocado design) |
| **TOTAL** | **46** | **Complete coverage of all safety filters** |

---

## Icon File Locations

All SVG icons are stored in:
```
/public/icons/allergens/circle-*.svg
```

**Naming Convention:** `circle-{icon-name}.svg`

Example: `circle-gluten.svg`, `circle-vegan.svg`, `circle-low-carb.svg`

---

## Complete Mapping Table

### Allergens (30 filters)

| Filter ID | Filter Label (EN) | SVG Filename | Source | Color |
|-----------|-------------------|--------------|--------|-------|
| gluten | Gluten | circle-gluten.svg | Erudus | Red (#EF4444) |
| cereal | Cereal | circle-cereal.svg | Erudus | Red |
| wheat | Wheat | circle-free-from-wheat.svg | Erudus | Red |
| barley | Barley | circle-free-from-barley.svg | Erudus | Red |
| rye | Rye | circle-free-from-rye.svg | Erudus | Red |
| oats | Oats | circle-free-from-oats.svg | Erudus | Red |
| crustaceans | Crustaceans | circle-crustaceans.svg | Erudus | Red |
| shellfish | Shellfish | circle-shellfish.svg | **NanoBanana AI** | Red |
| squid | Squid | circle-squid.svg | **NanoBanana AI** | Red |
| shrimp | Shrimp | circle-shrimp.svg | **NanoBanana AI** | Red |
| crab | Crab | circle-crab.svg | **NanoBanana AI** | Red |
| eggs | Eggs | circle-eggs.svg | Erudus | Red |
| fish | Fish | circle-fish.svg | Erudus | Red |
| peanuts | Peanuts | circle-peanuts.svg | Erudus | Red |
| soy | Soy | circle-soy.svg | **NanoBanana AI** | Red |
| soya | Soya | circle-soya.svg | Erudus | Red |
| milk | Milk | circle-milk.svg | Erudus | Red |
| nuts | Tree Nuts | circle-nuts.svg | Erudus | Red |
| celery | Celery | circle-celery.svg | Erudus | Red |
| mustard | Mustard | circle-mustard.svg | Erudus | Red |
| sesame | Sesame | circle-sesame.svg | Erudus | Red |
| so2 | Sulphur Dioxide | circle-so2.svg | Erudus | Red |
| sulphites | Sulphites | circle-sulphites.svg | **NanoBanana AI** | Red |
| lupin | Lupin | circle-lupin.svg | Erudus | Red |
| molluscs | Molluscs | circle-molluscs.svg | Erudus | Red |
| pork | Pork | *Uses emoji fallback üê∑* | - | Red |
| beef | Beef | *Uses emoji fallback ü•©* | - | Red |
| chicken | Chicken | *Uses emoji fallback üçó* | - | Red |
| lamb | Lamb | *Uses emoji fallback üêë* | - | Red |
| alcohol | Alcohol | *Uses emoji fallback üç∑* | - | Red |

### Intolerances (10 filters)

| Filter ID | Filter Label (EN) | SVG Filename | Source | Color |
|-----------|-------------------|--------------|--------|-------|
| lactose | Lactose | circle-free-from-lactose.svg | Erudus | Amber (#F59E0B) |
| gluten-intolerance | Gluten (Intolerance) | circle-free-from-gluten.svg | Erudus | Amber |
| fructose | Fructose | *Uses emoji fallback üçØ* | - | Amber |
| histamine | Histamine | *Uses emoji fallback ‚öóÔ∏è* | - | Amber |
| fodmap | FODMAP | *Uses emoji fallback üåæ* | - | Amber |
| nightshades | Nightshades | *Uses emoji fallback üçÖ* | - | Amber |
| caffeine | Caffeine | *Uses emoji fallback ‚òï* | - | Amber |
| msg | MSG | *Uses emoji fallback üßÇ* | - | Amber |
| artificial-sweeteners | Artificial Sweeteners | *Uses emoji fallback üç¨* | - | Amber |
| sulfites | Sulfites | *Uses emoji fallback üçá* | - | Amber |

### Diets (6 filters)

| Filter ID | Filter Label (EN) | SVG Filename | Source | Color |
|-----------|-------------------|--------------|--------|-------|
| vegan | Vegan | circle-vegan.svg | Erudus | Green (#10B981) |
| vegetarian | Vegetarian | circle-vegetarian.svg | Erudus | Green |
| halal | Halal | circle-halal.svg | Erudus | Green |
| kosher | Kosher | circle-kosher.svg | Erudus | Green |
| low-carb | Low Carb | circle-low-carb.svg | **Manual** | Green |
| keto | Keto | *Uses emoji fallback ü•ë* | - | Green |

---

## Icon Source Details

### 1. Erudus Icons (39 icons)
- **License:** MIT License
- **Style:** Professional, monochrome SVG with circular borders
- **ViewBox:** 64x64
- **Quality:** Industry-standard allergen icons
- **Files:** All `circle-*.svg` files not marked as AI or Manual

### 2. NanoBanana AI Icons (6 icons)
- **Generator:** Google's NanoBanana Pro (Claude-integrated AI)
- **Date Created:** 2025-11-23
- **Style:** Matched to Erudus icon aesthetic
- **Purpose:** Fill gaps for SEA/Korea market (shellfish, squid, shrimp, crab, soy, sulphites)
- **Quality:** Professional, style-consistent with Erudus set

**List of AI-Generated Icons:**
1. `circle-shellfish.svg` - Generic shellfish icon
2. `circle-squid.svg` - Squid/calamari icon
3. `circle-shrimp.svg` - Shrimp/prawn icon
4. `circle-crab.svg` - Crab icon
5. `circle-soy.svg` - Soybean icon (alternative to soya)
6. `circle-sulphites.svg` - Sulphites icon (alternative to so2)

### 3. Manually Created Icons (1 icon)
- **Creator:** Claude Code (AI Assistant)
- **Date Created:** 2025-11-23
- **Design:** Avocado shape (represents healthy fats in low-carb diets)
- **Style:** Matched to Erudus icon aesthetic
- **Purpose:** Complete 46/46 filter coverage

**Manual Icon:**
- `circle-low-carb.svg` - Avocado design representing low-carb/keto diet

---

## Emoji Fallback Filters (10 filters)

The following filters currently use emoji fallback icons:

1. **pork** - üê∑
2. **beef** - ü•©
3. **chicken** - üçó
4. **lamb** - üêë
5. **alcohol** - üç∑
6. **fructose** - üçØ
7. **histamine** - ‚öóÔ∏è
8. **fodmap** - üåæ
9. **nightshades** - üçÖ
10. **caffeine** - ‚òï
11. **msg** - üßÇ
12. **artificial-sweeteners** - üç¨
13. **sulfites** - üçá
14. **keto** - ü•ë

**Note:** These filters are less commonly used in restaurant menus. Professional SVG icons can be created on demand if needed.

---

## Component Usage

### AllergenIcon Component

Location: `/components/ui/allergen-icon.tsx`

**Key Features:**
- Automatic color coding based on filter type
- Circular badge with icon
- Fallback to emoji if SVG not available

**Usage Example:**
```tsx
import { AllergenIcon } from '@/components/ui/allergen-icon'

<AllergenIcon
  name="gluten"
  size={24}
  colorScheme="allergen"
/>
```

### Mapping Function

The `getIconNameFromFilterId()` function maps filter IDs to icon filenames:

```typescript
// Example mappings
'gluten' ‚Üí 'gluten'           ‚Üí /public/icons/allergens/circle-gluten.svg
'low-carb' ‚Üí 'low-carb'       ‚Üí /public/icons/allergens/circle-low-carb.svg
'shellfish' ‚Üí 'shellfish'     ‚Üí /public/icons/allergens/circle-shellfish.svg
```

---

## Color Scheme System

Icons are displayed with intelligent color coding:

| Filter Type | Color | Hex Code | Meaning |
|-------------|-------|----------|---------|
| **Allergen** | Red | #EF4444 | Danger, life-threatening |
| **Intolerance** | Amber | #F59E0B | Caution, discomfort |
| **Diet** | Green | #10B981 | Lifestyle, preference |

All icons are rendered white on their colored circular backgrounds using CSS filters.

---

## Design Preview System

**Location:** `/app/design-preview/page.tsx`
**URL:** `http://localhost:3004/design-preview`

Visual showcase with three sections:

1. **AI-Generated Icons** (Green border) - 6 NanoBanana icons
2. **Manually Created Icon** (Purple border) - 1 low-carb icon
3. **Icon Coverage Status** - Complete breakdown showing 39+6+1 = 46 total

---

## Database Reference

All safety filters are defined in:
```
/packages/shared/database/safety-filters.ts
```

Total: **46 filters** (30 allergens + 10 intolerances + 6 diets)

---

## Future Icon Creation

### When to Create New SVG Icons

1. **High Priority:** Filters used frequently in menus (pork, beef, chicken, alcohol)
2. **Medium Priority:** Common intolerances (fructose, caffeine, msg)
3. **Low Priority:** Niche dietary requirements (fodmap, histamine, nightshades)

### Icon Creation Process

**Option 1: Manual SVG Creation**
1. Design icon matching Erudus style (64x64 viewBox, monochrome)
2. Save as `circle-{name}.svg` in `/public/icons/allergens/`
3. Add mapping in `allergen-icon.tsx` ‚Üí `getIconNameFromFilterId()`
4. Update design-preview showcase
5. Update this documentation

**Option 2: AI Generation (NanoBanana Pro)**
1. Use Claude Code with image generation capability
2. Request style-matched icon design
3. Follow same integration steps as Option 1

---

## Troubleshooting

### Icon Not Displaying

**Check:**
1. SVG file exists: `/public/icons/allergens/circle-{name}.svg`
2. Mapping exists in `allergen-icon.tsx` line 111-153
3. Filter ID matches database: `/packages/shared/database/safety-filters.ts`
4. Browser cache cleared (Next.js may cache public assets)

### Icon Shows Emoji Instead of SVG

**Reason:** No SVG mapping found. The system gracefully falls back to emoji.

**Solution:** Create SVG icon and add mapping, or accept emoji as-is.

---

## Changelog

### 2025-11-23
- ‚úÖ Created `circle-low-carb.svg` (manually designed avocado icon)
- ‚úÖ Added mapping for `low-carb` filter in `allergen-icon.tsx`
- ‚úÖ Updated design-preview with manual icon showcase section
- ‚úÖ Achieved **46/46 complete coverage** with professional SVG icons
- ‚úÖ Created this comprehensive documentation file

### Previous Session
- ‚úÖ Integrated 6 NanoBanana AI icons (shellfish, squid, shrimp, crab, soy, sulphites)
- ‚úÖ Removed redundant `tree-nuts` mapping (no such filter exists)
- ‚úÖ Updated design-preview from 7 to 6 AI icons

---

## Quick Reference Commands

```bash
# List all available SVG icons
ls -1 public/icons/allergens/circle-*.svg

# Count total icons
ls -1 public/icons/allergens/circle-*.svg | wc -l

# Search for specific icon
ls public/icons/allergens/ | grep "gluten"

# View design preview
open http://localhost:3004/design-preview
```

---

**Maintained by:** GUDBRO QR Platform - Coffeeshop Frontend Team
**Contact:** See `/packages/coffeeshop/frontend/CLAUDE.md` for project context

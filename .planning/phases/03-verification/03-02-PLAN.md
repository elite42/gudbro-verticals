---
phase: 03-verification
plan: 02
type: execute
wave: 2
depends_on: ['03-01']
files_modified:
  - apps/wellness/frontend/app/page.tsx
  - apps/tours/frontend/components/booking/BookingForm.tsx
  - .planning/phases/03-verification/03-VERIFICATION-REPORT.md
autonomous: true

must_haves:
  truths:
    - 'All BottomNav links point to routes that exist in each PWA'
    - 'All internal page links (CTAs, cards, buttons) point to valid routes'
    - 'Back navigation from detail pages returns to correct listing page'
    - 'Developer can visit any PWA locally and navigate without 404s'
  artifacts:
    - path: '.planning/phases/03-verification/03-VERIFICATION-REPORT.md'
      provides: 'Complete verification report with pass/fail per vertical per criterion'
      contains: 'NAV-01'
  key_links:
    - from: 'BottomNav href values'
      to: 'app/ filesystem routes (page.tsx)'
      via: 'static analysis grep + find'
      pattern: 'href.*/'
    - from: 'Internal page links'
      to: 'app/ filesystem routes'
      via: 'grep for href= in .tsx files'
      pattern: 'href="/'
---

<objective>
Validate all navigation links across 7 verticals and produce the final verification report.

Purpose: Ensure every link in every vertical points to a real route. Fix the 2 known broken links (wellness /reviews, tours /terms). Produce the definitive verification report that confirms Phase 3 success criteria.
Output: All navigation validated, broken links fixed, comprehensive verification report created.
</objective>

<execution_context>
@/Users/gianfrancodagostino/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gianfrancodagostino/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-verification/03-RESEARCH.md
@.planning/phases/03-verification/03-01-SUMMARY.md
@.planning/phases/03-verification/build-results.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Validate navigation links and fix broken ones</name>
  <files>
    apps/wellness/frontend/app/page.tsx
    apps/tours/frontend/components/booking/BookingForm.tsx
  </files>
  <action>
Run static analysis to validate ALL navigation links across all 7 verticals. Three checks per vertical:

**Check 1: BottomNav links (NAV-01)**

For Category A verticals (pharmacy, workshops, gym, laundry, wellness):

- Extract all `href` values from the BottomNav component (in `components/BottomNav.tsx`)
- For each href (excluding `#`), verify a matching `page.tsx` exists under `app/`
- Example: `href="/products"` must have `apps/<vertical>/frontend/app/products/page.tsx`

For Category B verticals (tours, accommodations):

- These use state-based navigation (onTabChange buttons, not Links)
- Confirm BottomNav component exists and has no href attributes that could be broken
- Mark as N/A for route validation (SPA pattern — intentional)

**Check 2: Internal page links (NAV-02)**

For each vertical, grep ALL `.tsx` files under `app/` and `components/` for `href="/` patterns:

```bash
grep -rn 'href="/' apps/<vertical>/frontend/app/ apps/<vertical>/frontend/components/ --include="*.tsx"
```

For each extracted link:

- Skip external links (https://, mailto:, tel:)
- Skip anchor links (#)
- Skip dynamic segments that are clearly parameterized (e.g., `/services/${slug}`)
- Verify the static path portion has a matching route in `app/`

**Check 3: Back navigation (NAV-03)**

For each vertical with detail pages (`[slug]/page.tsx` or `[id]/page.tsx`):

- Check if the detail page has a back link/button pointing to the parent listing page
- A "Back" button, breadcrumb, or the BottomNav providing return navigation all count
- If no explicit back mechanism exists: note as advisory (browser back button works as fallback)

**Fix known broken links:**

1. **Wellness** `app/page.tsx:699` — `href="/reviews"`: No `/reviews` route exists.
   - Fix: Change to `href="/promotions"` (closest existing page for social proof) OR remove the link entirely if it's a placeholder. Examine surrounding context to determine best fix.

2. **Tours** `components/booking/BookingForm.tsx:455` — `href="/terms"`: No `/terms` route exists.
   - Fix: Change to `href="#"` with a comment `{/* TODO: add /terms route */}` OR create a minimal `/terms/page.tsx` placeholder. Examine context to choose.

For each fix: keep under 5 lines, commit atomically with message like `fix(03-02): fix broken [link] in [vertical]`.
</action>
<verify>

- Zero broken BottomNav links across all Category A verticals
- The 2 known broken links (wellness /reviews, tours /terms) are resolved
- grep for href="/ in all verticals shows no links pointing to non-existent routes
  </verify>
  <done>All BottomNav links validated. All internal links validated. Known broken links fixed and committed. Zero navigation errors remain.</done>
  </task>

<task type="auto">
  <name>Task 2: Produce final verification report</name>
  <files>
    .planning/phases/03-verification/03-VERIFICATION-REPORT.md
  </files>
  <action>
Create the comprehensive verification report at `.planning/phases/03-verification/03-VERIFICATION-REPORT.md`.

The report must map directly to the 5 success criteria from ROADMAP.md Phase 3 and the 10 requirements (BLD-01 through BLD-07, NAV-01 through NAV-03).

Structure:

```markdown
# Phase 3: Verification Report

**Date:** [date]
**Status:** [PASS / PARTIAL / FAIL]

## Summary

[1-2 sentence overall result]

## Requirements Checklist

### Build Verification

| Req    | Vertical       | Status    | Notes |
| ------ | -------------- | --------- | ----- |
| BLD-01 | Pharmacy       | PASS/FAIL | ...   |
| BLD-02 | Workshops      | PASS/FAIL | ...   |
| BLD-03 | Gym            | PASS/FAIL | ...   |
| BLD-04 | Wellness       | PASS/FAIL | ...   |
| BLD-05 | Laundry        | PASS/FAIL | ...   |
| BLD-06 | Tours          | PASS/FAIL | ...   |
| BLD-07 | Accommodations | PASS/FAIL | ...   |

### Navigation Verification

| Req    | Check                               | Status    | Details                  |
| ------ | ----------------------------------- | --------- | ------------------------ |
| NAV-01 | BottomNav links -> existing routes  | PASS/FAIL | [per-vertical breakdown] |
| NAV-02 | Internal page links -> valid routes | PASS/FAIL | [findings]               |
| NAV-03 | Back navigation on detail pages     | PASS/FAIL | [findings]               |

## Success Criteria Mapping

| #   | Criterion                                                  | Status |
| --- | ---------------------------------------------------------- | ------ |
| 1   | All 7 new vertical PWAs complete next build without errors | ...    |
| 2   | All BottomNav links point to routes that exist             | ...    |
| 3   | All internal page links point to valid routes              | ...    |
| 4   | Back navigation from detail pages works                    | ...    |
| 5   | Developer can visit any PWA and navigate without 404s      | ...    |

## Fixes Applied During Verification

[List all inline fixes from Plan 01 and Plan 02]

## Warnings (Non-blocking)

[Deprecation warnings, advisories]

## Follow-up Items (if any)

[Complex issues deferred]
```

Pull build results from `build-results.md` (created in Plan 01) and combine with navigation analysis from Task 1.
</action>
<verify>
File `.planning/phases/03-verification/03-VERIFICATION-REPORT.md` exists and contains status for all 10 requirements (BLD-01..07, NAV-01..03) and all 5 success criteria.
</verify>
<done>Complete verification report produced. All 10 requirements have PASS/FAIL status. All 5 success criteria mapped. Phase 3 verification is conclusive.</done>
</task>

</tasks>

<verification>
- All 7 verticals have validated BottomNav links (Category A) or confirmed SPA pattern (Category B)
- Zero broken internal links remain
- 03-VERIFICATION-REPORT.md covers all 10 requirements and 5 success criteria
- Any fixes committed atomically
</verification>

<success_criteria>

- NAV-01: All BottomNav links point to existing routes (Category A) or use state-based nav (Category B)
- NAV-02: All internal page links point to valid routes
- NAV-03: Detail pages have back navigation path
- Complete verification report exists with per-requirement status
  </success_criteria>

<output>
After completion, create `.planning/phases/03-verification/03-02-SUMMARY.md`
</output>

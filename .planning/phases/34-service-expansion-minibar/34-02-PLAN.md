---
phase: 34-service-expansion-minibar
plan: 02
type: execute
wave: 2
depends_on: ['34-01']
files_modified:
  - apps/accommodations/frontend/components/stay/ServiceItemCard.tsx
  - apps/accommodations/frontend/components/stay/ServiceCatalog.tsx
  - apps/accommodations/frontend/components/stay/ServicesCarousel.tsx
autonomous: true

must_haves:
  truths:
    - 'Service catalog shows large product photos with visible add-to-cart buttons'
    - 'Items flagged included_in_rate show a clear visual badge instead of a price'
    - 'ServicesCarousel shows larger images and Included badge for complimentary items'
  artifacts:
    - path: 'apps/accommodations/frontend/components/stay/ServiceItemCard.tsx'
      provides: 'Card with large image, included-in-rate badge, visible add-to-cart'
      min_lines: 80
    - path: 'apps/accommodations/frontend/components/stay/ServiceCatalog.tsx'
      provides: 'Redesigned catalog with 2-col grid and includedInRate support'
      min_lines: 120
    - path: 'apps/accommodations/frontend/components/stay/ServicesCarousel.tsx'
      provides: 'Carousel with larger photos and Included badge'
  key_links:
    - from: 'ServiceCatalog.tsx'
      to: 'ServiceItemCard.tsx'
      via: 'Catalog renders cards for each item'
      pattern: 'ServiceItemCard'
---

<objective>
Redesign the service catalog UI with large product photos, included-in-rate badges, and updated carousel cards.

Purpose: SVC-01 (catalog redesign with large photos), SVC-02 (included-in-rate flag visual)
Output: Redesigned ServiceItemCard (vertical layout, large photos), updated ServiceCatalog (2-col grid), updated ServicesCarousel (larger images, Included badge)
</objective>

<execution_context>
@/Users/gianfrancodagostino/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gianfrancodagostino/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-service-expansion-minibar/34-01-SUMMARY.md

Key source files:
@apps/accommodations/frontend/components/stay/ServiceItemCard.tsx
@apps/accommodations/frontend/components/stay/ServiceCatalog.tsx
@apps/accommodations/frontend/components/stay/ServicesCarousel.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign ServiceItemCard with large photos and included-in-rate badge</name>
  <files>
    apps/accommodations/frontend/components/stay/ServiceItemCard.tsx
  </files>
  <action>
Redesign ServiceItemCard for a more visual, photo-forward layout.

**Current state:** Horizontal card (image 80x80 left, content right). Small image, text-heavy.

**New design (SVC-01):**

- **Layout**: Vertical card with image on top taking full width, content below
- **Image area**: `h-36 w-full rounded-t-2xl` -- large product photo. If no image, show gradient with category emoji (existing pattern but bigger: text-4xl)
- **Content area**: Padding p-3 below image
  - Item name: `text-sm font-semibold text-[#2D2016]`
  - Description: `line-clamp-2 text-xs text-[#8B7355]` (keep existing)
  - **Price row** (flex between):
    - Left: Price OR "Included" badge
    - Right: Add-to-cart button (bigger: h-9 w-9 rounded-full)

**Included-in-rate badge (SVC-02):**

- When `item.includedInRate === true`, instead of price show:
  ```tsx
  <span className="inline-flex items-center gap-1 rounded-full bg-emerald-100 px-2.5 py-1 text-xs font-semibold text-emerald-700">
    <Check size={12} weight="bold" />
    Included
  </span>
  ```
- The item is still orderable (add-to-cart button still appears) but no price is shown
- Import Check from @phosphor-icons/react

**Add-to-cart button:**

- When not in cart: Round teal button with Plus icon (existing, but bigger: h-9 w-9)
- When in cart: Quantity stepper (existing pattern, keep as-is)
- When disabled (out of stock / outside hours): hidden (existing behavior)

**Props update:**

- Add `includedInRate?: boolean` to item prop type (from ServiceItemResponse)
- Keep all existing props for backward compatibility

**Availability badges:**

- Keep "Out of stock" and time-range badges below description (existing, move to below desc)

**Time formatting:**

- Keep existing `formatServiceTime` and `formatTimeRange` functions unchanged
  </action>
  <verify>
  TypeScript compilation: `cd apps/accommodations/frontend && npx tsc --noEmit --pretty 2>&1 | head -30`
  Verify included-in-rate badge: `grep 'includedInRate\|Included' apps/accommodations/frontend/components/stay/ServiceItemCard.tsx`
  Verify vertical layout (h-36 image): `grep 'h-36' apps/accommodations/frontend/components/stay/ServiceItemCard.tsx`
  </verify>
  <done>
  ServiceItemCard redesigned with vertical layout, large product photo (h-36), and "Included" badge for included-in-rate items. Add-to-cart button is larger and more visible. All backward-compatible props preserved.
  </done>
  </task>

<task type="auto">
  <name>Task 2: Update ServiceCatalog and ServicesCarousel for new card layout</name>
  <files>
    apps/accommodations/frontend/components/stay/ServiceCatalog.tsx
    apps/accommodations/frontend/components/stay/ServicesCarousel.tsx
  </files>
  <action>
**ServiceCatalog.tsx:**

1. Update the items grid from `grid-cols-1 sm:grid-cols-2` to `grid-cols-2 gap-3` (2 columns always on mobile since cards are now vertical/compact)
2. Pass `includedInRate={item.includedInRate}` to ServiceItemCard (add to the item prop or pass directly)
3. The ServiceItemCard item prop type already includes `includedInRate` from Task 1
4. Ensure the ServiceItemResponse type flowing in includes `includedInRate`
5. No other layout changes needed -- the category tabs and header are fine

**ServicesCarousel.tsx:**

1. Update the carousel item cards to reflect the new design:
   - Make the card taller to show the image more prominently
   - Change from `w-40` to `w-44` for slightly wider cards
   - Image area: change from `h-20` to `h-28` for larger product photos
   - Add "Included" badge when `item.includedInRate`:
     ```tsx
     {
       item.includedInRate ? (
         <span className="text-xs font-semibold text-emerald-600">
           Included
         </span>
       ) : (
         <span className="text-sm font-semibold text-[#3D8B87]">
           {formatPrice(item.price, item.currency)}
         </span>
       );
     }
     ```
2. Keep quick-add button behavior unchanged
3. Keep "Unavailable" text for out-of-stock items

NOTE: The `ServiceItemResponse` type already has `includedInRate` from 34-01. The `fetchServices` call returns the new field. No API changes needed here.
</action>
<verify>
TypeScript compilation: `cd apps/accommodations/frontend && npx tsc --noEmit --pretty 2>&1 | head -30`
Verify ServiceCatalog passes includedInRate: `grep 'includedInRate' apps/accommodations/frontend/components/stay/ServiceCatalog.tsx`
Verify ServicesCarousel shows Included badge: `grep 'Included\|includedInRate' apps/accommodations/frontend/components/stay/ServicesCarousel.tsx`
</verify>
<done>
ServiceCatalog grid updated to 2-col layout with includedInRate support. ServicesCarousel cards show larger images and "Included" badge for complimentary items.
</done>
</task>

</tasks>

<verification>
1. `cd apps/accommodations/frontend && npx tsc --noEmit` -- zero errors
2. ServiceItemCard shows large vertical photo layout with "Included" badge for includedInRate items
3. ServiceCatalog renders 2-column grid with new card layout
4. ServicesCarousel shows larger photos and "Included" text for complimentary items
</verification>

<success_criteria>

- Service catalog shows large product photos with visible add-to-cart buttons (ServiceItemCard vertical layout)
- Items flagged included_in_rate show "Included" badge with checkmark instead of price
- ServicesCarousel cards have larger images and show "Included" for complimentary items
- TypeScript compiles without errors

</success_criteria>

<output>
After completion, create `.planning/phases/34-service-expansion-minibar/34-02-SUMMARY.md`
</output>

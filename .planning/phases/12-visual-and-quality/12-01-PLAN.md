---
phase: 12-visual-and-quality
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/wellness/frontend/public/manifest.json
  - apps/laundry/frontend/public/manifest.json
  - apps/pharmacy/frontend/public/manifest.json
  - apps/workshops/frontend/public/manifest.json
  - apps/tours/frontend/public/manifest.json
  - apps/accommodations/frontend/public/manifest.json
  - tests/e2e/shared/screenshot-stable.css
  - docs/reference/PHYSICAL-QA-CHECKLIST.md
autonomous: true

must_haves:
  truths:
    - 'Every vertical has a manifest.json accessible at /manifest.json'
    - 'Every manifest has name, short_name, icons (192+512), theme_color, display, start_url'
    - 'A physical device QA checklist exists with per-vertical items'
    - 'Screenshot stabilization CSS exists for visual regression tests'
  artifacts:
    - path: 'apps/wellness/frontend/public/manifest.json'
      provides: 'Wellness PWA manifest'
      contains: 'short_name'
    - path: 'apps/laundry/frontend/public/manifest.json'
      provides: 'Laundry PWA manifest'
      contains: 'short_name'
    - path: 'apps/pharmacy/frontend/public/manifest.json'
      provides: 'Pharmacy PWA manifest'
      contains: 'short_name'
    - path: 'apps/workshops/frontend/public/manifest.json'
      provides: 'Workshops PWA manifest'
      contains: 'short_name'
    - path: 'apps/tours/frontend/public/manifest.json'
      provides: 'Tours PWA manifest'
      contains: 'short_name'
    - path: 'apps/accommodations/frontend/public/manifest.json'
      provides: 'Accommodations PWA manifest'
      contains: 'short_name'
    - path: 'tests/e2e/shared/screenshot-stable.css'
      provides: 'CSS to stabilize screenshots'
      contains: 'animation-duration'
    - path: 'docs/reference/PHYSICAL-QA-CHECKLIST.md'
      provides: 'Physical device QA checklist'
      contains: 'coffeeshop'
  key_links:
    - from: 'manifest.json files'
      to: 'layout.tsx themeColor'
      via: 'theme_color field must match layout.tsx themeColor'
      pattern: 'theme_color'
---

<objective>
Create PWA manifest files for the 6 verticals missing them, add screenshot stabilization CSS for visual regression tests, and write the physical device QA checklist document.

Purpose: Prerequisite work for VISQ-01 (visual baselines need stable CSS), VISQ-02 (manifest tests need manifest files to exist), and VISQ-03 (physical QA checklist).
Output: 6 manifest.json files, 1 screenshot-stable.css, 1 QA checklist doc, placeholder SVG icons for verticals lacking icon files.
</objective>

<execution_context>
@/Users/gianfrancodagostino/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gianfrancodagostino/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-visual-and-quality/12-RESEARCH.md

Key facts from research:

- 6 verticals missing manifest.json: wellness, laundry, pharmacy, workshops, tours, accommodations
- 3 verticals have manifest.json: coffeeshop (complete), gym (has manifest but icon files reference non-existent PNGs), waiter (not in scope)
- Theme colors from layout.tsx: wellness=#8BA888, laundry=#4A90D9, pharmacy=#2D9F83, workshops=#C2703E, tours/accommodations use array format
- Gym manifest references /icons/icon-192.png which does not exist on disk
- No verticals (except coffeeshop) have actual icon PNG files in public/
- Coffeeshop manifest is the most complete reference template
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Create manifest.json for 6 missing verticals + placeholder icons</name>
  <files>
    apps/wellness/frontend/public/manifest.json
    apps/laundry/frontend/public/manifest.json
    apps/pharmacy/frontend/public/manifest.json
    apps/workshops/frontend/public/manifest.json
    apps/tours/frontend/public/manifest.json
    apps/accommodations/frontend/public/manifest.json
    apps/wellness/frontend/public/icons/icon-192.png
    apps/wellness/frontend/public/icons/icon-512.png
    apps/laundry/frontend/public/icons/icon-192.png
    apps/laundry/frontend/public/icons/icon-512.png
    apps/pharmacy/frontend/public/icons/icon-192.png
    apps/pharmacy/frontend/public/icons/icon-512.png
    apps/workshops/frontend/public/icons/icon-192.png
    apps/workshops/frontend/public/icons/icon-512.png
    apps/tours/frontend/public/icons/icon-192.png
    apps/tours/frontend/public/icons/icon-512.png
    apps/accommodations/frontend/public/icons/icon-192.png
    apps/accommodations/frontend/public/icons/icon-512.png
    apps/gym/frontend/public/icons/icon-192.png
  </files>
  <action>
    Create manifest.json for each of the 6 missing verticals. Use gym's manifest as the minimal template (it's simpler than coffeeshop's).

    Each manifest MUST have these fields:
    - name: Full vertical name (e.g., "Serenity Wellness & Spa")
    - short_name: Short name (e.g., "Serenity")
    - description: One-line description
    - start_url: "/"
    - display: "standalone"
    - background_color: "#FFFFFF"
    - theme_color: Must match the themeColor from each vertical's layout.tsx:
      - wellness: "#8BA888"
      - laundry: "#4A90D9"
      - pharmacy: "#2D9F83"
      - workshops: "#C2703E"
      - tours: Read apps/tours/frontend/app/layout.tsx to get the primary themeColor value (it uses array format)
      - accommodations: Read apps/accommodations/frontend/app/layout.tsx to get the primary themeColor value (it uses array format)
    - orientation: "portrait"
    - icons: Array with 192x192 and 512x512 entries pointing to /icons/icon-192.png and /icons/icon-512.png

    For icon files: Generate minimal valid PNG placeholder files for all 7 verticals that need them (wellness, laundry, pharmacy, workshops, tours, accommodations, and gym which has manifest but missing icon files). Use a simple approach:
    - Create 1x1 pixel PNG files as minimal placeholders (they won't look pretty but will be technically valid PNG files that pass manifest validation)
    - Use Node.js Buffer to write the minimal PNG binary, or use ImageMagick/convert if available
    - Alternative: Use SVG data URI in the manifest instead of PNG files if creating binary PNGs is impractical -- BUT the standard approach is PNG files, so prefer that

    Names to use in manifests (invent plausible demo merchant names matching the coffeeshop pattern "ROOTS Coffee & Kitchen"):
    - wellness: "Serenity Wellness & Spa" / "Serenity"
    - laundry: "Fresh & Clean Laundry" / "Fresh & Clean"
    - pharmacy: "Green Cross Pharmacy" / "Green Cross"
    - workshops: "Artisan Workshop Hub" / "Artisan Hub"
    - tours: "Explorer Tours & Activities" / "Explorer Tours"
    - accommodations: "Sunset Stay Accommodations" / "Sunset Stay"

  </action>
  <verify>
    For each of the 6 new manifests:
    1. File exists at apps/{vertical}/frontend/public/manifest.json
    2. JSON is valid (node -e "require('./apps/{vertical}/frontend/public/manifest.json')")
    3. Has all required fields: name, short_name, theme_color, display, start_url, icons with 192+512 entries
    4. theme_color matches layout.tsx themeColor value

    For icon files:
    5. Each vertical has /public/icons/icon-192.png and /public/icons/icon-512.png (or gym has icon-192.png)

  </verify>
  <done>
    All 8 customer-facing verticals have valid manifest.json with required PWA fields. Icon files exist at referenced paths. Theme colors match layout.tsx values.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create screenshot stabilization CSS + physical device QA checklist</name>
  <files>
    tests/e2e/shared/screenshot-stable.css
    docs/reference/PHYSICAL-QA-CHECKLIST.md
  </files>
  <action>
    1. Create tests/e2e/shared/screenshot-stable.css with:
       - Disable all animations and transitions (* selector with !important)
       - Hide Unsplash images (img[src*="unsplash"]) via visibility:hidden
       - Hide timestamps and dynamic content ([data-dynamic], time elements)
       - Hide scrollbars (::-webkit-scrollbar)
       - Disable caret blinking (caret-color: transparent)
       Content from research:
       ```css
       *,*::before,*::after {
         animation-duration: 0s !important;
         animation-delay: 0s !important;
         transition-duration: 0s !important;
         transition-delay: 0s !important;
       }
       [data-dynamic],[data-testid='timestamp'],time { visibility: hidden !important; }
       img[src*='unsplash'] { visibility: hidden !important; }
       ::-webkit-scrollbar { display: none !important; }
       input, textarea { caret-color: transparent !important; }
       ```

    2. Create docs/reference/PHYSICAL-QA-CHECKLIST.md with:
       - Title and purpose section explaining this is for manual testing on physical devices
       - Common checks section (applies to ALL verticals):
         - Layout: no horizontal overflow, proper spacing, content fits viewport
         - Touch targets: minimum 44x44px for interactive elements
         - Typography: text is legible at default zoom, proper contrast
         - Navigation: BottomNav is reachable with thumb, links respond to tap
         - Scroll: smooth scrolling, no janky behavior, pull-to-refresh works if applicable
         - Images: load within 3s on 3G, proper aspect ratios, no broken images
         - Forms: keyboard opens for inputs, no content obscured by keyboard
         - PWA: Add to Home Screen works, splash screen shows, standalone mode works
       - Per-vertical section with specific items for each of the 8 verticals:
         - coffeeshop: menu category scroll, item detail modal, order summary, cart interaction
         - wellness: service cards carousel, staff profile images, booking form
         - laundry: service tier pricing cards, form drawer interaction
         - pharmacy: symptom search, product grid, info page navigation
         - workshops: workshop cards, about page scroll, WhatsApp CTA links
         - gym: course schedule, pass cards, membership tiers
         - tours: tour cards, category filter, booking form
         - accommodations: booking mode home, search/filter
       - Use checkbox format (- [ ]) so it can be used as a template
       - Add header noting which devices to test on (iPhone SE, mid-range Android, iPad)

  </action>
  <verify>
    1. tests/e2e/shared/screenshot-stable.css exists and contains animation-duration: 0s
    2. docs/reference/PHYSICAL-QA-CHECKLIST.md exists and contains all 8 vertical names
    3. QA checklist has checkbox format throughout
  </verify>
  <done>
    Screenshot stabilization CSS ready for use by visual regression tests. Physical device QA checklist documented with common + per-vertical items in checkbox format. VISQ-03 satisfied.
  </done>
</task>

</tasks>

<verification>
1. All 8 customer verticals have manifest.json in their public/ directory
2. All manifests parse as valid JSON with required PWA fields
3. Screenshot CSS file exists in tests/e2e/shared/
4. QA checklist exists in docs/reference/ with all 8 verticals
</verification>

<success_criteria>

- 6 new manifest.json files created (wellness, laundry, pharmacy, workshops, tours, accommodations)
- All manifests have: name, short_name, theme_color (matching layout.tsx), display, start_url, icons (192+512)
- Placeholder icon PNG files exist for all verticals that need them
- Screenshot stabilization CSS created at tests/e2e/shared/screenshot-stable.css
- Physical device QA checklist created at docs/reference/PHYSICAL-QA-CHECKLIST.md
- VISQ-03 requirement satisfied
  </success_criteria>

<output>
After completion, create `.planning/phases/12-visual-and-quality/12-01-SUMMARY.md`
</output>

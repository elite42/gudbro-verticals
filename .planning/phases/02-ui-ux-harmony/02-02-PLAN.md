---
phase: 02-ui-ux-harmony
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/accommodations/frontend/components/BottomNav.tsx
  - apps/accommodations/frontend/app/page.tsx
  - apps/accommodations/frontend/styles/globals.css
autonomous: true

must_haves:
  truths:
    - 'Accommodations PWA has a BottomNav component consistent with other verticals'
    - 'Accommodations BottomNav active state uses brand color via CSS variable (not hardcoded hex)'
    - 'Accommodations has pb-safe class defined in globals.css'
    - 'Accommodations BottomNav has pb-safe class for iOS safe area'
    - 'Accommodations BottomNav has 5 items: Home, Map, Center Menu, Services, Profile'
  artifacts:
    - path: 'apps/accommodations/frontend/components/BottomNav.tsx'
      provides: 'Extracted BottomNav component'
      min_lines: 50
    - path: 'apps/accommodations/frontend/styles/globals.css'
      provides: 'pb-safe utility class'
      contains: 'pb-safe'
    - path: 'apps/accommodations/frontend/app/page.tsx'
      provides: 'Page using BottomNav component instead of inline nav'
  key_links:
    - from: 'apps/accommodations/frontend/components/BottomNav.tsx'
      to: 'apps/accommodations/frontend/app/page.tsx'
      via: 'import and props (activeTab, onTabChange, onMenuToggle)'
      pattern: 'import.*BottomNav'
    - from: 'apps/accommodations/frontend/components/BottomNav.tsx'
      to: 'apps/accommodations/frontend/styles/globals.css'
      via: 'pb-safe class and CSS variable'
      pattern: 'pb-safe'
---

<objective>
Create Accommodations BottomNav component and fix consistency issues.

Purpose: Accommodations is the only vertical PWA without a BottomNav component file. It has an inline nav in page.tsx using hardcoded colors and a non-standard `pb-safe-bottom` class. This plan extracts it to a component, standardizes the brand color to use CSS variables, and adds the missing `pb-safe` utility class.

Output: Accommodations PWA with a proper BottomNav component matching the template pattern used by 6 other verticals.
</objective>

<execution_context>
@/Users/gianfrancodagostino/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gianfrancodagostino/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@apps/accommodations/frontend/app/page.tsx
@apps/accommodations/frontend/styles/globals.css
@apps/gym/frontend/components/BottomNav.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add pb-safe utility and primary color variable to Accommodations globals.css</name>
  <files>apps/accommodations/frontend/styles/globals.css</files>
  <action>
  In apps/accommodations/frontend/styles/globals.css:

1. Add the `.pb-safe` utility class (same as other verticals):

   ```css
   .pb-safe {
     padding-bottom: env(safe-area-inset-bottom, 0px);
   }
   ```

   Add this near the end of the file or in a "Safe Area" section.

2. In the `:root` CSS variables section, verify there is a usable primary color variable. The file already has `--primary: 15 80% 55%` in HSL format. Add an explicit hex variable for BottomNav usage:
   ```css
   --primary-hex: #e07a5f;
   --charcoal-muted: #6b6560;
   ```
   Add these only if they don't already exist. Check for `--charcoal-muted` first.

Do NOT remove any existing CSS classes or variables.
</action>
<verify>
Grep for 'pb-safe' in globals.css - should find the utility class definition.
Grep for '--primary-hex' in globals.css - should find the variable.
Grep for '--charcoal-muted' in globals.css - should find the variable.
</verify>
<done>Accommodations globals.css has pb-safe utility class and --primary-hex / --charcoal-muted CSS variables defined.</done>
</task>

<task type="auto">
  <name>Task 2: Extract BottomNav component and update page.tsx</name>
  <files>
    apps/accommodations/frontend/components/BottomNav.tsx
    apps/accommodations/frontend/app/page.tsx
  </files>
  <action>
  **IMPORTANT CONTEXT:** Accommodations uses a tab-based single-page architecture. The BottomNav uses `activeTab` state (home/map/services/profile) and `setActiveTab` to switch views. It does NOT use Next.js Link routing like other verticals. The center button toggles a bento menu drawer.

**Step 1: Create BottomNav component**

Create `apps/accommodations/frontend/components/BottomNav.tsx` following the template pattern but adapted for tab-based navigation:

```typescript
'use client';

interface BottomNavProps {
  activeTab: string;
  onTabChange: (tab: string) => void;
  onMenuToggle: () => void;
}
```

The component should:

- Accept `activeTab`, `onTabChange`, and `onMenuToggle` as props
- Have 5 nav items: Home, Map, Center (bento menu), Services, Profile
- Keep the existing inline SVG icons (do NOT migrate to Phosphor - out of scope)
- Use `pb-safe` class on nav element (NOT `pb-safe-bottom`)
- Use CSS variables for colors:
  - Active: `var(--primary-hex)` instead of hardcoded `#E07A5F`
  - Inactive: `var(--charcoal-muted)` instead of hardcoded `#6B6560`
- Use inline `style` for colors (matching template pattern), not Tailwind text-[] classes
- Keep scale-110 for active state via `style={{ transform: isActive ? 'scale(1.1)' : 'scale(1)' }}`
- Center button calls `onMenuToggle` and has hover color effect
- Add `md:hidden` class to hide on desktop
- Use `border-t` with `style={{ borderColor: 'var(--cloud-dark, #E8E4DF)' }}`

Structure the navItems as an array (matching template pattern from gym/laundry/pharmacy/workshops).

**Step 2: Update page.tsx**

In `apps/accommodations/frontend/app/page.tsx`:

1. Add import: `import BottomNav from '../components/BottomNav';`
2. Replace the entire inline `{/* Bottom Navigation */}` section (approximately lines 851-962) with:
   ```tsx
   <BottomNav
     activeTab={activeTab}
     onTabChange={setActiveTab}
     onMenuToggle={() => setShowMenu(!showMenu)}
   />
   ```
3. Keep the `{/* Bento Menu Drawer */}` section in page.tsx (it's tied to page content/state)
4. Do NOT change any other part of page.tsx

The goal is exact behavioral equivalence - the UI should look and behave identically, just refactored to use a component.
</action>
<verify>

- File exists: `ls apps/accommodations/frontend/components/BottomNav.tsx`
- No hardcoded `#E07A5F` or `#6B6560` in BottomNav.tsx: `grep '#E07A5F\|#6B6560' apps/accommodations/frontend/components/BottomNav.tsx` returns nothing
- Uses CSS variables: `grep 'var(--primary-hex)' apps/accommodations/frontend/components/BottomNav.tsx` returns matches
- Has pb-safe: `grep 'pb-safe' apps/accommodations/frontend/components/BottomNav.tsx` returns match
- page.tsx imports component: `grep "import.*BottomNav" apps/accommodations/frontend/app/page.tsx` returns match
- Inline nav removed from page.tsx: `grep 'Bottom Navigation' apps/accommodations/frontend/app/page.tsx` returns nothing (comment removed with inline nav)
  </verify>
  <done>Accommodations has a BottomNav.tsx component with 5 items, using CSS variables for brand colors, pb-safe class, and md:hidden. page.tsx uses the component via props instead of inline nav markup.</done>
  </task>

</tasks>

<verification>
1. `ls apps/accommodations/frontend/components/BottomNav.tsx` - file exists
2. `grep -c 'var(--primary-hex)' apps/accommodations/frontend/components/BottomNav.tsx` - returns count > 0
3. `grep -c 'pb-safe' apps/accommodations/frontend/components/BottomNav.tsx` - returns count > 0
4. `grep 'pb-safe' apps/accommodations/frontend/styles/globals.css` - utility class defined
5. `grep 'import.*BottomNav' apps/accommodations/frontend/app/page.tsx` - component imported
6. No hardcoded nav colors in BottomNav.tsx
7. Bento Menu Drawer still exists in page.tsx
</verification>

<success_criteria>

- Accommodations has a BottomNav.tsx component file in components/
- BottomNav uses var(--primary-hex) for active state color
- BottomNav uses var(--charcoal-muted) for inactive state color
- BottomNav has pb-safe class on nav element
- globals.css defines .pb-safe utility class
- page.tsx imports and uses BottomNav component with props
- 5 nav items maintained: Home, Map, Center Menu, Services, Profile
- Bento Menu Drawer still renders from page.tsx
  </success_criteria>

<output>
After completion, create `.planning/phases/02-ui-ux-harmony/02-02-SUMMARY.md`
</output>
